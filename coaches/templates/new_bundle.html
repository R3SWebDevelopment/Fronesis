{% extends 'session_base.html' %}
{% load static %}


{% block CONTENT %}
 {{ block.super }}
<form method="post">
  {% csrf_token %}
  {{form.coach}}

  <section>
    <div class="wrap">
      <h1 class="mb20">Create a New Bundle</h1>
      <div class="one-col">
        <div class="heading-separator mb40">
          <div class="blue-cir"><div class="txt">1</div></div>
          <h2 class="t-lyonL c-gray">Session Details</h2>
        </div>
        <div class="one-col mb40">
          <div class="two-col columns">
            <label class="dark-label mb20">BUNDLE NAME OR TITLE</label>
            <input type="text" class="border-bottom-input two-col columns" placeholder="Add a descriptive name for your bundle" id="id_name" name="name" required>
          </div>
          <div class="two-col columns">
            <label class="dark-label mb20">BUNDLE PRICE (IN MXN)</label>
            <input type="number" class="border-bottom-input two-col columns" placeholder="$100.00" id="id_price" name="price" required>
          </div>
        </div>
        <div class="one-col mb40">
          <label class="dark-label mb20">DESCRIPTION</label>
          <input type="text" class="border-bottom-input two-col columns" placeholder="Describe this session type (in less than 80 characters)" id="id_description" name="description" required>
        </div>
        <div class="one-col mb40 blue-tags">
          <label class="dark-label mb20">CATEGORIES</label>
          <input type="text" class="border-bottom-input two-col columns" placeholder="" id="id_category" name="category" required>
        </div>
      </div>
    </div>
  </section>

<section>
		<div class="wrap">
			<div class="one-col">
				<div class="heading-separator mb40">
					<div class="blue-cir"><div class="txt">2</div></div>
					<h2 class="t-lyonL c-gray">Included in this Bundle</h2>
				</div>
			</div>
			<div class="one-col mb40">
				<div class="two-col columns by_session">
					<div class="black-border-box-x1 min-box">
						<h3 class="c-aqua mb20"><strong>Define by number of sessions</strong></h3>
						<div class="one-col mb20">
							<label class="dark-label mb20">INCLUDE THE FOLLOWING SESSIONS</label>
							<div class="one-col">
								<div class="col10">
									<input type="number" class="border-bottom-input two-col columns" placeholder="0" id="id_half_hour_session" name="half_hour_session" min="0">
								</div>
								<div class="three-col v-align-b">
									<p class="ptbl20">30 Minute Meeting</p>
								</div>
							</div>
							<div class="one-col">
								<div class="col10">
									<input type="number" class="border-bottom-input two-col columns" placeholder="0" id="id_hour_session" name="hour_session" min="0">
								</div>
								<div class="three-col v-align-b">
									<p class="ptbl20">1 hour Business Meeting</p>
								</div>
							</div>
							<div class="one-col">
								<div class="col10">
									<input type="number" class="border-bottom-input two-col columns" placeholder="0" id="id_open_session" name="open_session" min="0" max="1">
								</div>
								<div class="three-col v-align-b">
									<p class="ptbl20">Opening Season</p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="two-col columns by_time">
					<div class="gray-border-box-x1 min-box">
						<h3 class="c-aqua mb20"><strong>Define by set amount of time</strong></h3>
						<div class="one-col mb20">
							<label class="dark-label mb20">INCLUDE THE FOLLOWING SESSIONS</label>
							<div class="two-col columns">
                <label class="dark-label mb20">MINUTES</label>
								<input type="number" class="border-bottom-input two-col columns" placeholder="0" id="id_minutes" name="minutes" min="0">
							</div>
							<div class="two-col columns">
                <label class="dark-label mb20">HOURS</label>
                <input type="number" class="border-bottom-input two-col columns" placeholder="0" id="id_hours" name="hours" min="0">
							</div>
						</div>
						<div class="one-col mb20">
							<label class="dark-label mb20">DEFINE SESSIONS AVAILABLE</label>
							<div class="border-bottom-radio-input">
								<div class="green-radio-input"><input type="radio" name="half_hour" id="id_half_hour"><span class="check"></span></div>
								<p class="c-dark-purple">30 Minute Meeting</p>
							</div>
							<div class="border-bottom-radio-input">
								<div class="green-radio-input"><input type="radio" name="hour" id="id_hour"><span class="check"></span></div>
								<p class="c-dark-purple">1 Hour Business Meeting</p>
							</div>
							<div class="border-bottom-radio-input">
								<div class="green-radio-input"><input type="radio" id="id_is_open_session" name="is_open_session"><span class="check"></span></div>
								<p class="c-dark-purple">Opening Season</p>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

  <section>
		<div class="wrap">
			<div class="one-col">
				<div class="heading-separator mb40">
					<div class="blue-cir"><div class="txt">3</div></div>
					<h2 class="t-lyonL c-gray">Payment &amp; Expiration</h2>
				</div>
			</div>
			<div class="one-col mb40">
				<div class="one-col mb20">
					<div class="two-col columns mb40">
						<label class="dark-label mb20">PAYMENT OPTIONS</label>
						<div class="border-bottom-radio-input">
							<div class="green-radio-input"><input type="checkbox" name="upfront_payment_required" id="id_upfront_payment_required"><span class="check"></span></div>
							<p class="c-dark-purple">Request Upfront Payment</p>
						</div>
						<div class="border-bottom-radio-input">
							<div class="green-radio-input"><input type="checkbox" name="down_payment_allow" id="id_down_payment_allow"><span class="check"></span></div>
							<p class="c-dark-purple">Allow Down Payment</p>
						</div>
					</div>
					<div class="two-col columns mb40 disable-events">
						<label class="dark-label mb20">DEFINE DOWN PAYMENT AMOUNT (IF REQUESTED)</label>
						<input type="number" class="border-bottom-input" placeholder="$ 0.00" name="down_payment" id="id_down_payment" min="0">
					</div>
				</div>
				<div class="one-col mb20">
					<div class="two-col columns mb40">
						<label class="dark-label mb20">BUNDLE DURATION</label>
						<div class="border-bottom-radio-input">
							<div class="green-radio-input"><input type="checkbox" name="never_expires" id="id_never_expires" class="expiration" checked><span class="check"></span></div>
							<p class="c-dark-purple">Bundle never expires</p>
						</div>
						<div class="border-bottom-radio-input">
							<div class="green-radio-input"><input type="checkbox" name="expires" id="id_expires" class="expiration"><span class="check"></span></div>
							<p class="c-dark-purple">Bundle expires</p>
						</div>
					</div>
					<div class="two-col columns mb40 disable-events">
						<label class="dark-label mb20">EXPIRATION DATE</label>
						<input type="date" class="border-bottom-input" min="{% now "Y-m-d" %}" id="id_expiration_date" name="expiration_date">
					</div>
				</div>
			</div>
		</div>
	</section>

</form>
{% endblock %}
{% block SCRIPT %}
{{block.super}}
<script>
  $(document).ready(function(){
    var never_expires = $(this).find('#id_never_expires');
    var expires = $(this).find('#id_expires');
    var expiration = $(this).find('.expiration');
    var expiration_date = $(this).find('#id_expiration_date');
    var upfront_payment_required = $(this).find('#id_upfront_payment_required');
    var down_payment = $(this).find('#id_down_payment');

    var by_session_inputs = $('.by_session').find('input');
    var by_time_inputs = $('.by_time').find('input');

    $(this).find('input[type="number"]').change(function(){
      var min = $(this).attr('min');
      var max = $(this).attr('max');
      if(min != undefined && min > $(this).val()){
        $(this).val('');
      }
      if(max != undefined && max < $(this).val()){
        $(this).val('');
      }
    });

    $(by_time_inputs).change(function(){
      if($(this).val().trim().length > 0){
        $(by_session_inputs).val('')
      }else{
        $(this).val('')
      }
    });
    $(by_session_inputs).change(function(){
      if($(this).val().trim().length > 0){
        $(by_time_inputs).val('').prop("checked", false)
      }else{
        $(this).val('')
      }
    });


    $(upfront_payment_required).change(function(){
      if($(this).is(':checked')){
        $(down_payment).val('').parent().removeClass('disable-events');
      }else{
        $(down_payment).val('').parent().addClass('disable-events');
      }
    });


    $(expiration).change(function(){
      var is_checked = $(this).is(':checked');
      $(expiration).not(this).prop("checked", !is_checked);
      if($(expires).is(':checked')){
        $(expiration_date).val('').parent().removeClass('disable-events');
      }else{
        $(expiration_date).val('').parent().addClass('disable-events');
      }
    });
  });
</script>
{% endblock %}
